{% do headTitle().append(translate("txt-update-effort-spent-for-affiliation-in-period-%s")|format(
affiliation.organisation.organisation,
report.parseName()
)) %}


<h1>{{ translate("txt-update-effort-spent-for-affiliation-in-period-%s")|format(
    affiliation.organisation.organisation,
    report.parseName()
    ) }}</h1>

{% do form.prepare() %}
{% do form.setAttribute('class','form-horizontal') %}

{{ form().openTag(form)|raw }}


<div class="form-group">
    <label class="col-sm-3 control-label">{{ translate("txt-project-name") }}</label>

    <div class="col-sm-9">
        <p class="form-control-static">{{ projectLink(affiliation.project,'view-community', 'name') }}</p>
    </div>
</div>

<div class="form-group">
    <label class="col-sm-3 control-label">{{ translate("txt-affiliation") }}</label>

    <div class="col-sm-9">
        <p class="form-control-static">{{ affiliationLink(affiliation,'view-community') }}</p>
    </div>
</div>

<div class="form-group">
    <label class="col-sm-3 control-label">{{ translate("txt-report") }}</label>

    <div class="col-sm-9">
        <p class="form-control-static">{{ reportLink(report,'report-community', 'name') }}</p>
    </div>
</div>


{{ ztbformelement(form.get('marketAccess')) }}

{{ ztbformelement(form.get('mainContribution')) }}
{{ ztbformelement(form.get('summary')) }}

<div class="form-group">
    <label class="col-sm-3 control-label">{{ translate("txt-planned-effort") }}</label>

    <div class="col-sm-9">
        <p class="form-control-static">{{ totalPlannedEffort }} [{{ translate("txt-py") }}]</p>
    </div>
</div>


{{ ztbformelement(form.get('effort')) }}
{{ ztbformelement(form.get('comment')) }}

<div class="form-group">
    <label class="col-sm-3 control-label">{{ translate("txt-exploitation-related-achievement") }}</label>

    <div class="col-sm-9">
        {% for achievement in affiliation.achievement %}
            <p class="form-control-static">{{ achievementLink(achievement,'view-community', 'name') }}</p>
        {% else %}
            <p class="form-control-static"><i
                        class="fa fa-exclamation-circle warning"></i> {{ translate("txt-no-exploitation-related-achievements-were-created-for-%s")|format(affiliation.project.parseFullName()) }}
            </p>
        {% endfor %}
    </div>
</div>


<div class="form-group">
    <div class="col-sm-offset-3 col-sm-9">

        {{ ztbformelement(form.get('submit')) }}
        {{ ztbformelement(form.get('cancel')) }}
    </div>
</div>

{{ form().closeTag()|raw }}

<script type="text/javascript">
    $(function () {

        //        $('#marketAccess').simplyCountable({
        //            counter:            '#counter',
        //            countType:          'characters',
        //            maxCount:           140,
        //            strictMax:          false,
        //            countDirection:     'down',
        //            safeClass:          'safe',
        //            overClass:          'over',
        //            thousandSeparator:  ',',
        //            onOverCount:        function(count, countable, counter){},
        //            onSafeCount:        function(count, countable, counter){},
        //            onMaxCount:         function(count, countable, counter){}
        //        });

        var options_description = {
            'maxCharacterSize': 500,
            'originalStyle': 'originalDisplayInfo',
            'warningStyle': 'originalDisplayInfo',
            'warningNumber': 40,
            'displayFormat': '#left characters left'
        };

        var options_main_contribution = {
            'maxCharacterSize': 250,
            'originalStyle': 'originalDisplayInfo',
            'warningStyle': 'originalDisplayInfo',
            'warningNumber': 40,
            'displayFormat': '#left characters left'
        };

        $('#effort').textareaCount(options_description);
        var options_marketaccess = {
            'maxCharacterSize': 1000,
            'originalStyle': 'originalDisplayInfo',
            'warningStyle': 'originalDisplayInfo',
            'warningNumber': 40,
            'displayFormat': '#left characters left'
        };
        $('#marketAccess').textareaCount(options_marketaccess);
        $('#mainContribution').textareaCount(options_main_contribution);
        $('#summary').textareaCount(options_description);
        $('#comment').textareaCount(options_description);
    });
</script>

